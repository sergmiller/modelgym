language: python3
sudo: required
before_install:
  - pyenv global system 3.6
channels:
  - conda-forge
dependencies:
  - python=3
  - numpy=1.12.*
  - pandas=0.19.*
  - scipy=0.19.*
  - scikit-learn=0.18.*
  - openmpi=2.1.1
  - networkx=1.11
  - xgboost=0.6a2
  - lightgbm=2.0.4
install:
  - gem install rake
  - pip install --upgrade setuptools
  - pip3 install numpy jupyter pyyaml hyperopt scikit-optimize pandas networkx==1.11
  - git clone --recursive https://github.com/Microsoft/LightGBM
  - cd LightGBM
  - git checkout 80c641cd17727bebea613af3cbfe3b985dbd3313
  - mkdir build && cd build && cmake -DUSE_MPI=ON ..
  - make -j
  - cd ../python-package/ && python3 setup.py install
  - cd ../../
  - rm -rf LightGBM

  - git clone --recursive https://github.com/dmlc/xgboost
  - cd xgboost
  - git checkout 14fba01b5ac42506741e702d3fde68344a82f9f0
  - make -j
  - cd python-package; python3 setup.py install
  - cd ../../
  - rm -rf xgboost
script: 
  - pytest
